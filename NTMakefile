# $Id$
CC = cl /TC /c /nologo
CXX = cl /TP /c /nologo
LD = link /nologo

CFLAGS = /Iinclude /D_MILSKO /DUSE_GDI /DUSE_STB_IMAGE /DSTBI_NO_SIMD
CXXFLAGS = /Iinclude
LDFLAGS = /DLL
.SUFFIXES: .obj .c .cc
all: src\Mw.dll oosrc\MwOO.dll
clean: 
	del /f /q src\core.obj
	del /f /q src\draw.obj
	del /f /q src\default.obj
	del /f /q src\lowlevel.obj
	del /f /q src\error.obj
	del /f /q src\unicode.obj
	del /f /q src\font.obj
	del /f /q src\color.obj
	del /f /q src\directory.obj
	del /f /q src\messagebox.obj
	del /f /q src\boldfont.obj
	del /f /q external\ds.obj
	del /f /q external\image.obj
	del /f /q src\icon\info.obj
	del /f /q src\icon\note.obj
	del /f /q src\icon\warning.obj
	del /f /q src\icon\error.obj
	del /f /q src\icon\news.obj
	del /f /q src\icon\question.obj
	del /f /q src\cursor\default.obj
	del /f /q src\cursor\cross.obj
	del /f /q src\cursor\text.obj
	del /f /q src\widget\button.obj
	del /f /q src\widget\frame.obj
	del /f /q src\widget\opengl.obj
	del /f /q src\widget\window.obj
	del /f /q src\widget\menu.obj
	del /f /q src\widget\entry.obj
	del /f /q src\widget\submenu.obj
	del /f /q src\widget\viewport.obj
	del /f /q src\widget\image.obj
	del /f /q src\widget\scrollbar.obj
	del /f /q src\widget\checkbox.obj
	del /f /q src\widget\label.obj
	del /f /q src\widget\listbox.obj
	del /f /q src\widget\numberentry.obj
	del /f /q src\backend\gdi.obj
	del /f /q oosrc\base.obj
	del /f /q oosrc\widget\button.obj
	del /f /q oosrc\widget\frame.obj
	del /f /q oosrc\widget\image.obj
	del /f /q oosrc\widget\menu.obj
	del /f /q oosrc\widget\opengl.obj
	del /f /q oosrc\widget\scrollbar.obj
	del /f /q oosrc\widget\submenu.obj
	del /f /q oosrc\widget\window.obj
	del /f /q oosrc\widget\checkbox.obj
	del /f /q oosrc\widget\viewport.obj
	del /f /q oosrc\widget\listbox.obj
	del /f /q oosrc\widget\label.obj
	del /f /q oosrc\widget\entry.obj
	del /f /q oosrc\widget\numberentry.obj
	del /f /q src\Mw.dll
	del /f /q oosrc\MwOO.dll

src\Mw.dll:  src\core.obj src\draw.obj src\default.obj src\lowlevel.obj src\error.obj src\unicode.obj src\font.obj src\color.obj src\directory.obj src\messagebox.obj src\boldfont.obj external\ds.obj external\image.obj src\icon\info.obj src\icon\note.obj src\icon\warning.obj src\icon\error.obj src\icon\news.obj src\icon\question.obj src\cursor\default.obj src\cursor\cross.obj src\cursor\text.obj src\widget\button.obj src\widget\frame.obj src\widget\opengl.obj src\widget\window.obj src\widget\menu.obj src\widget\entry.obj src\widget\submenu.obj src\widget\viewport.obj src\widget\image.obj src\widget\scrollbar.obj src\widget\checkbox.obj src\widget\label.obj src\widget\listbox.obj src\widget\numberentry.obj src\backend\gdi.obj
	$(LD) $(LDFLAGS)  /OUT:$@  src\core.obj src\draw.obj src\default.obj src\lowlevel.obj src\error.obj src\unicode.obj src\font.obj src\color.obj src\directory.obj src\messagebox.obj src\boldfont.obj external\ds.obj external\image.obj src\icon\info.obj src\icon\note.obj src\icon\warning.obj src\icon\error.obj src\icon\news.obj src\icon\question.obj src\cursor\default.obj src\cursor\cross.obj src\cursor\text.obj src\widget\button.obj src\widget\frame.obj src\widget\opengl.obj src\widget\window.obj src\widget\menu.obj src\widget\entry.obj src\widget\submenu.obj src\widget\viewport.obj src\widget\image.obj src\widget\scrollbar.obj src\widget\checkbox.obj src\widget\label.obj src\widget\listbox.obj src\widget\numberentry.obj src\backend\gdi.obj  opengl32.lib gdi32.lib user32.lib
	

oosrc\MwOO.dll:  oosrc\base.obj oosrc\widget\button.obj oosrc\widget\frame.obj oosrc\widget\image.obj oosrc\widget\menu.obj oosrc\widget\opengl.obj oosrc\widget\scrollbar.obj oosrc\widget\submenu.obj oosrc\widget\window.obj oosrc\widget\checkbox.obj oosrc\widget\viewport.obj oosrc\widget\listbox.obj oosrc\widget\label.obj oosrc\widget\entry.obj oosrc\widget\numberentry.obj
	$(LD) $(LDFLAGS)  /OUT:$@  oosrc\base.obj oosrc\widget\button.obj oosrc\widget\frame.obj oosrc\widget\image.obj oosrc\widget\menu.obj oosrc\widget\opengl.obj oosrc\widget\scrollbar.obj oosrc\widget\submenu.obj oosrc\widget\window.obj oosrc\widget\checkbox.obj oosrc\widget\viewport.obj oosrc\widget\listbox.obj oosrc\widget\label.obj oosrc\widget\entry.obj oosrc\widget\numberentry.obj  src\Mw.lib
	

.c.obj:
	$(CC) $(CFLAGS) /Fo$@ $<
.cc.obj:
	$(CXX) $(CXXFLAGS) /Fo$@ $<
